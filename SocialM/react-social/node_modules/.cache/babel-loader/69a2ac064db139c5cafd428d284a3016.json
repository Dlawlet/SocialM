{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\nouss\\\\OneDrive\\\\Images\\\\SocialM\\\\react-social\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\nouss\\\\OneDrive\\\\Images\\\\SocialM\\\\react-social\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\nouss\\\\OneDrive\\\\Images\\\\SocialM\\\\react-social\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\nouss\\\\OneDrive\\\\Images\\\\SocialM\\\\react-social\\\\src\\\\components\\\\share\\\\Share.jsx\";\nimport \"./share.css\";\nimport { PermMedia, Label, Room, EmojiEmotions, Cancel } from \"@material-ui/icons\";\nimport { useContext, useRef, useState } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport axios from \"axios\";\nexport default function Share() {\n  var _useContext = useContext(AuthContext),\n      user = _useContext.user;\n\n  var PF = process.env.REACT_APP_PUBLIC_FOLDER;\n  var desc = useRef();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      file = _useState2[0],\n      setFile = _useState2[1];\n\n  var submitHandler = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var newPost, data, fileName;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              newPost = {\n                userId: user._id,\n                desc: desc.current.value\n              };\n\n              if (!file) {\n                _context.next = 16;\n                break;\n              }\n\n              data = new FormData();\n              fileName = Date.now() + file.name;\n              data.append(\"name\", fileName);\n              data.append(\"file\", file);\n              newPost.img = fileName;\n              console.log(newPost);\n              _context.prev = 9;\n              _context.next = 12;\n              return axios.post(\"/upload\", data);\n\n            case 12:\n              _context.next = 16;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](9);\n\n            case 16:\n              _context.prev = 16;\n              _context.next = 19;\n              return axios.post(\"/posts\", newPost);\n\n            case 19:\n              window.location.reload();\n              _context.next = 24;\n              break;\n\n            case 22:\n              _context.prev = 22;\n              _context.t1 = _context[\"catch\"](16);\n\n            case 24:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[9, 14], [16, 22]]);\n    }));\n\n    return function submitHandler(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"share\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shareWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shareTop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"shareProfileImg\",\n    src: user.profilePicture ? PF + user.profilePicture : PF + \"person/noAvatar.png\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"What's in your mind \" + user.username + \"?\",\n    className: \"shareInput\",\n    ref: desc,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"shareHr\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }), file && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shareImgContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"shareImg\",\n    src: URL.createObjectURL(file),\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Cancel, {\n    className: \"shareCancelImg\",\n    onClick: function onClick() {\n      return setFile(null);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"shareBottom\",\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shareOptions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"file\",\n    className: \"shareOption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(PermMedia, {\n    htmlColor: \"tomato\",\n    className: \"shareIcon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"shareOptionText\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  }, \"Photo or Video\"), /*#__PURE__*/React.createElement(\"input\", {\n    style: {\n      display: \"none\"\n    },\n    type: \"file\",\n    id: \"file\",\n    accept: \".png,.jpeg,.jpg\",\n    onChange: function onChange(e) {\n      return setFile(e.target.files[0]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shareOption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    htmlColor: \"blue\",\n    className: \"shareIcon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"shareOptionText\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  }, \"Tag\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shareOption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Room, {\n    htmlColor: \"green\",\n    className: \"shareIcon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"shareOptionText\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, \"Location\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shareOption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(EmojiEmotions, {\n    htmlColor: \"goldenrod\",\n    className: \"shareIcon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"shareOptionText\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  }, \"Feelings\"))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"shareButton\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, \"Share\"))));\n}","map":{"version":3,"sources":["C:/Users/nouss/OneDrive/Images/SocialM/react-social/src/components/share/Share.jsx"],"names":["PermMedia","Label","Room","EmojiEmotions","Cancel","useContext","useRef","useState","AuthContext","axios","Share","user","PF","process","env","REACT_APP_PUBLIC_FOLDER","desc","file","setFile","submitHandler","e","preventDefault","newPost","userId","_id","current","value","data","FormData","fileName","Date","now","name","append","img","console","log","post","window","location","reload","profilePicture","username","URL","createObjectURL","display","target","files"],"mappings":"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","sourcesContent":["import \"./share.css\";\nimport {\n  PermMedia,\n  Label,\n  Room,\n  EmojiEmotions,\n  Cancel,\n} from \"@material-ui/icons\";\nimport { useContext, useRef, useState } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport axios from \"axios\";\n\nexport default function Share() {\n  const { user } = useContext(AuthContext);\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n  const desc = useRef();\n  const [file, setFile] = useState(null);\n\n  const submitHandler = async (e) => {\n    e.preventDefault();\n    const newPost = {\n      userId: user._id,\n      desc: desc.current.value,\n    };\n    if (file) {\n      const data = new FormData();\n      const fileName = Date.now() + file.name;\n      data.append(\"name\", fileName);\n      data.append(\"file\", file);\n      newPost.img = fileName;\n      console.log(newPost);\n      try {\n        await axios.post(\"/upload\", data);\n      } catch (err) {}\n    }\n    try {\n      await axios.post(\"/posts\", newPost);\n      window.location.reload();\n    } catch (err) {}\n  };\n\n  return (\n    <div className=\"share\">\n      <div className=\"shareWrapper\">\n        <div className=\"shareTop\">\n          <img\n            className=\"shareProfileImg\"\n            src={\n              user.profilePicture\n                ? PF + user.profilePicture\n                : PF + \"person/noAvatar.png\"\n            }\n            alt=\"\"\n          />\n          <input\n            placeholder={\"What's in your mind \" + user.username + \"?\"}\n            className=\"shareInput\"\n            ref={desc}\n          />\n        </div>\n        <hr className=\"shareHr\" />\n        {file && (\n          <div className=\"shareImgContainer\">\n            <img className=\"shareImg\" src={URL.createObjectURL(file)} alt=\"\" />\n            <Cancel className=\"shareCancelImg\" onClick={() => setFile(null)} />\n          </div>\n        )}\n        <form className=\"shareBottom\" onSubmit={submitHandler}>\n          <div className=\"shareOptions\">\n            <label htmlFor=\"file\" className=\"shareOption\">\n              <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Photo or Video</span>\n              <input\n                style={{ display: \"none\" }}\n                type=\"file\"\n                id=\"file\"\n                accept=\".png,.jpeg,.jpg\"\n                onChange={(e) => setFile(e.target.files[0])}\n              />\n            </label>\n            <div className=\"shareOption\">\n              <Label htmlColor=\"blue\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Tag</span>\n            </div>\n            <div className=\"shareOption\">\n              <Room htmlColor=\"green\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Location</span>\n            </div>\n            <div className=\"shareOption\">\n              <EmojiEmotions htmlColor=\"goldenrod\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Feelings</span>\n            </div>\n          </div>\n          <button className=\"shareButton\" type=\"submit\">\n            Share\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}